<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><meta name="google-site-verification" content="GY3xi-El9ePp4mSskpCuCNS4x4elE7wbFPe2eKCtS8Y"><title>Implement Stack using Queues | Xinli's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Implement Stack using Queues</h1><a id="logo" href="/.">Xinli's Blog</a><p class="description">Coding World</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Implement Stack using Queues</h1><div class="post-meta">Aug 13, 2016<span> | </span><span class="category"><a href="/categories/Leetcode/">Leetcode</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2016/08/13/Implement-Stack-using-Queues/" href="/2016/08/13/Implement-Stack-using-Queues/#disqus_thread" class="disqus-comment-count"></a><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">Contents</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Description"><span class="toc-number">1.</span> <span class="toc-text">Description</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Solution"><span class="toc-number">2.</span> <span class="toc-text">Solution</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Analysis"><span class="toc-number">2.1.</span> <span class="toc-text">Analysis</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Solution1-Two-Queue"><span class="toc-number">2.1.1.</span> <span class="toc-text">Solution1: Two Queue</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Solution2"><span class="toc-number">2.1.2.</span> <span class="toc-text">Solution2</span></a></li></ol></li></ol></li></ol></div></div><div class="post-content"><p>This is the solution about <a href="https://leetcode.com/problems/implement-stack-using-queues/" target="_blank" rel="external">Leetcode-Implement Stack using Queues</a>.</p>
<h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>Implement the following operations of a stack using queues.</p>
<ul>
<li>push(x) – Push element x onto stack.</li>
<li>pop() – Removes the element on top of the stack.</li>
<li>top() – Get the top element.</li>
<li>empty() – Return whether the stack is empty.</li>
</ul>
<p>Notes:</p>
<ul>
<li>You must use only standard operations of a queue – which means only <code>push to back</code>, <code>peek/pop from front</code>, <code>size</code>, and <code>is empty</code> operations are valid.</li>
<li>Depending on your language, queue may not be supported natively. You may simulate a queue by using a list or deque (double-ended queue), as long as you use only standard operations of a queue.</li>
<li>You may assume that all operations are valid (for example, no pop or top operations will be called on an empty stack).</li>
</ul>
<p>Update (2015-06-11):<br>The class name of the Java function had been updated to MyStack instead of Stack.</p>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><h3 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h3><h4 id="Solution1-Two-Queue"><a href="#Solution1-Two-Queue" class="headerlink" title="Solution1: Two Queue"></a>Solution1: Two Queue</h4><p>check the first queue firstly, then the second if necessary. Since the first queue has higher priority to own the target.  Push all elements except the last one from one queue to another.  Return the last one.</p>
<h4 id="Solution2"><a href="#Solution2" class="headerlink" title="Solution2"></a>Solution2</h4><p>Each time when we push an element, we rotate the queue to make the tail be the head.</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//Solution1: Two Queues</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyStack</span> </span>&#123;</div><div class="line">	 Queue&lt;Integer&gt; firstQueue;</div><div class="line">	 Queue&lt;Integer&gt; secondQueue;</div><div class="line">	 <span class="function"><span class="keyword">public</span> <span class="title">MyStack</span><span class="params">()</span> </span>&#123;</div><div class="line">	 	firstQueue = <span class="keyword">new</span> ArrayDeque&lt;&gt;();</div><div class="line">	 	secondQueue = <span class="keyword">new</span> ArrayDeque&lt;&gt;();</div><div class="line">	 &#125;</div><div class="line">    <span class="comment">// Push element x onto stack.</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">    	firstQueue.offer(x);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// Removes the element on top of the stack.</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</div><div class="line">    	<span class="keyword">if</span>(firstQueue.isEmpty())&#123;</div><div class="line">    		<span class="keyword">while</span>(secondQueue.size()!=<span class="number">1</span>)&#123;</div><div class="line">    			firstQueue.offer(secondQueue.poll());</div><div class="line">    		&#125;</div><div class="line">    		secondQueue.poll();</div><div class="line">    	&#125;<span class="keyword">else</span> &#123;	</div><div class="line">    		<span class="keyword">while</span>(firstQueue.size()!=<span class="number">1</span>)&#123;</div><div class="line">    			secondQueue.offer(firstQueue.poll());</div><div class="line">    		&#125;</div><div class="line">    		firstQueue.poll();</div><div class="line">    	&#125;</div><div class="line">    &#125;		</div><div class="line">    <span class="comment">// Get the top element.</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">int</span> <span class="title">top</span><span class="params">()</span> </span>&#123;</div><div class="line">    	<span class="keyword">int</span> <span class="keyword">target</span>;</div><div class="line">    	<span class="keyword">if</span>(firstQueue.isEmpty())&#123;</div><div class="line">    		<span class="keyword">while</span>(secondQueue.size()!=<span class="number">1</span>)&#123;</div><div class="line">    			firstQueue.offer(secondQueue.poll());</div><div class="line">    		&#125;</div><div class="line">    		<span class="keyword">target</span> =  secondQueue.poll();</div><div class="line">    		firstQueue.offer(<span class="keyword">target</span>);</div><div class="line">    	&#125;<span class="keyword">else</span> &#123;</div><div class="line">    	  <span class="keyword">while</span>(firstQueue.size()!=<span class="number">1</span>)&#123;</div><div class="line">    	  	secondQueue.offer(firstQueue.poll());</div><div class="line">    	  &#125;</div><div class="line">    	  <span class="keyword">target</span> =  firstQueue.poll();</div><div class="line">    	  secondQueue.offer(<span class="keyword">target</span>);</div><div class="line">    	 &#125;</div><div class="line">    	 <span class="keyword">return</span> <span class="keyword">target</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">// Return whether the stack is empty.</span></div><div class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">boolean</span> <span class="title">empty</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> firstQueue.isEmpty() &amp;&amp; secondQueue.isEmpty();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//Solution2: One Queue</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyStack</span> </span>&#123;</div><div class="line">	Queue&lt;Integer&gt; queue;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyStack</span><span class="params">()</span> </span>&#123;</div><div class="line">		queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</div><div class="line">	&#125;</div><div class="line">    <span class="comment">// Push element x onto stack.</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">    	queue.offer(x);</div><div class="line">    	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;queue.size()<span class="number">-1</span>;i++) &#123;</div><div class="line">    		queue.offer(queue.poll());</div><div class="line">    	&#125;</div><div class="line">    &#125;</div><div class="line">	<span class="comment">// Removes the element on top of the stack.</span></div><div class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</div><div class="line">		queue.poll();</div><div class="line">	&#125;</div><div class="line">	<span class="comment">// Get the top element.</span></div><div class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">int</span> <span class="title">top</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="function"><span class="keyword">return</span> queue.<span class="title">peek</span><span class="params">()</span></span>;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">// Return whether the stack is empty.</span></div><div class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">boolean</span> <span class="title">empty</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="function"><span class="keyword">return</span> queue.<span class="title">isEmpty</span><span class="params">()</span></span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://xinli90.com/2016/08/13/Implement-Stack-using-Queues/" data-id="ciu8kf5ku003ypnhwq39veptt" class="article-share-link">Share</a><div class="tags"><a href="/tags/Leetcode/">Leetcode</a></div><div class="post-nav"><a href="/2016/08/15/Day7-DataStructure-about-Map/" class="pre">Day7 DataStructure about Map</a><a href="/2016/08/13/Implement-Queue-using-Stacks/" class="next">Implement Queue using Stacks</a></div><div id="disqus_thread"><script>var disqus_shortname = 'xinli';
var disqus_identifier = '2016/08/13/Implement-Stack-using-Queues/';
var disqus_title = 'Implement Stack using Queues';
var disqus_url = 'http://xinli90.com/2016/08/13/Implement-Stack-using-Queues/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//xinli.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/Leetcode/" style="font-size: 15px;">Leetcode</a> <a href="/tags/Seeking-Job/" style="font-size: 15px;">Seeking Job</a> <a href="/tags/J2EE/" style="font-size: 15px;">J2EE</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AWS/">AWS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Data-Structure/">Data Structure</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Design-Pattern/">Design Pattern</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Geek/">Geek</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTTP/">HTTP</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/J2EE/">J2EE</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Leetcode/">Leetcode</a><span class="category-list-count">82</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Multithreading/">Multithreading</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/class-design/">class design</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/Remove-Duplicates-from-Sorted-Array/">Remove Duplicates from Sorted Array</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/House-Robber/">House Robber</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/Count-and-Say/">Count and Say</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/Maximum-Subarray/">Maximum Subarray</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/Add-Digits/">Add Digits</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/11/Random-Pick-Index/">Random Pick Index</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/11/Linked-List-Random-Node/">Linked List Random Node</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/11/Day19-DataBase/">Day19 DataBase</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/09/Day18-Design-Pattern/">Day18 Design Pattern</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/05/Day17-JavaScript-Introduction/">Day17 JavaScript Introduction</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//xinli.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="null" title="null" target="_blank"></a><ul></ul><a href="null" title="null" target="_blank"></a><ul></ul><a href="null" title="null" target="_blank"></a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Xinli's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-83440669-1','auto');ga('send','pageview');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>